import {Matcher, MatcherOptions} from './matches'
import {waitForOptions} from './wait-for'

<<<<<<< HEAD
export type WithSuggest = {suggest?: boolean}

export type GetErrorFunction<Arguments extends any[] = [string]> = (
  c: Element | null,
  ...args: Arguments
) => string
=======
export type GetErrorFunction = (c: Element | null, alt: string) => string
>>>>>>> 0c1d8533fd9ba5f385e7fc867e325dccfff5259b

export interface SelectorMatcherOptions extends MatcherOptions {
  selector?: string
  ignore?: boolean | string
}

export type QueryByAttribute = (
  attribute: string,
  container: HTMLElement,
  id: Matcher,
  options?: MatcherOptions,
) => HTMLElement | null

export type AllByAttribute = (
  attribute: string,
  container: HTMLElement,
  id: Matcher,
  options?: MatcherOptions,
) => HTMLElement[]

export const queryByAttribute: QueryByAttribute
export const queryAllByAttribute: AllByAttribute
<<<<<<< HEAD
export function getElementError(
  message: string | null,
  container: HTMLElement,
): Error
=======
export function getElementError(message: string, container: HTMLElement): Error
>>>>>>> 0c1d8533fd9ba5f385e7fc867e325dccfff5259b

/**
 * query methods have a common call signature. Only the return type differs.
 */
export type QueryMethod<Arguments extends any[], Return> = (
  container: HTMLElement,
  ...args: Arguments
) => Return
export type QueryBy<Arguments extends any[]> = QueryMethod<
  Arguments,
  HTMLElement | null
>
export type GetAllBy<Arguments extends any[]> = QueryMethod<
  Arguments,
  HTMLElement[]
>
export type FindAllBy<Arguments extends any[]> = QueryMethod<
  [Arguments[0], Arguments[1]?, waitForOptions?],
  Promise<HTMLElement[]>
>
export type GetBy<Arguments extends any[]> = QueryMethod<Arguments, HTMLElement>
export type FindBy<Arguments extends any[]> = QueryMethod<
  [Arguments[0], Arguments[1]?, waitForOptions?],
  Promise<HTMLElement>
>

export type BuiltQueryMethods<Arguments extends any[]> = [
  QueryBy<Arguments>,
  GetAllBy<Arguments>,
  GetBy<Arguments>,
  FindAllBy<Arguments>,
  FindBy<Arguments>,
]
<<<<<<< HEAD

export function buildQueries<Arguments extends any[]>(
  queryAllBy: GetAllBy<Arguments>,
  getMultipleError: GetErrorFunction<Arguments>,
  getMissingError: GetErrorFunction<Arguments>,
=======
export function buildQueries<Arguments extends any[]>(
  queryByAll: GetAllBy<Arguments>,
  getMultipleError: (container: HTMLElement, ...args: Arguments) => string,
  getMissingError: (container: HTMLElement, ...args: Arguments) => string,
>>>>>>> 0c1d8533fd9ba5f385e7fc867e325dccfff5259b
): BuiltQueryMethods<Arguments>
